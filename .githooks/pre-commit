#!/bin/bash

# Tên tệp: pre-commit
# Đường dẫn: .git/hooks/pre-commit

# Thực hiện quá trình build và kiểm tra dự án C#
# Thay đổi đường dẫn và lệnh phù hợp với dự án của bạn.

# Đường dẫn đến thư mục gốc của dự án
project_root="$(git rev-parse --show-toplevel)"

# Thực hiện build dự án
dotnet build "$project_root"

# Kiểm tra kết quả build
if [ $? -ne 0 ]; then
  echo "Lỗi: Build không thành công. Vui lòng sửa lỗi trước khi commit."
  exit 1
fi

# Thực hiện kiểm tra dự án (ví dụ: sử dụng NUnit)
dotnet test "$project_root"

# Kiểm tra kết quả kiểm tra
if [ $? -ne 0 ]; then
  echo "Lỗi: Kiểm tra không thành công. Vui lòng sửa lỗi trước khi commit."
  exit 1
fi

# Nếu tất cả các bước trên thành công, cho phép commit
exit 0
